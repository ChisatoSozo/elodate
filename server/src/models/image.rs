use image::EncodableLayout;
use std::io::Write;
use std::{error::Error, fs::File, path::Path};

use fake::Dummy;
use image::{io::Reader, DynamicImage};
use paperclip::actix::Apiv2Schema;
use serde::{Deserialize, Serialize};
use webp::{Encoder, WebPMemory};

#[derive(Debug, Serialize, Deserialize, Apiv2Schema, Clone, PartialEq, Eq, Dummy)]
pub enum ElodateImageFormat {
    PNG,
    JPEG,
    WEBP,
}

impl ElodateImageFormat {
    pub fn to_ext(&self) -> &str {
        match self {
            ElodateImageFormat::PNG => "png",
            ElodateImageFormat::JPEG => "jpeg",
            ElodateImageFormat::WEBP => "webp",
        }
    }
    pub fn from_ext(ext: &str) -> Option<Self> {
        match ext {
            "png" => Some(ElodateImageFormat::PNG),
            "jpeg" => Some(ElodateImageFormat::JPEG),
            "webp" => Some(ElodateImageFormat::WEBP),
            _ => None,
        }
    }
}

#[derive(Debug, Serialize, Deserialize, Apiv2Schema, Clone, PartialEq, Eq, Dummy)]
pub struct Image {
    pub b64_content: String,
    pub image_type: ElodateImageFormat,
}

impl Default for Image {
    fn default() -> Self {
        Image {
            b64_content: TEST_IMG_B64.to_string(),
            image_type: ElodateImageFormat::PNG,
        }
    }
}
impl Image {
    pub fn load<P: AsRef<Path>>(path: P) -> Result<Self, Box<dyn Error>> {
        let image = Image {
            #[allow(deprecated)]
            b64_content: base64::encode(std::fs::read(path)?),
            image_type: ElodateImageFormat::WEBP,
        };
        Ok(image)
    }

    pub fn save_as_webp(
        b64_content: &String,
        format: &ElodateImageFormat,
        file_path: &Path,
    ) -> Result<(), Box<dyn Error>> {
        // Decode base64 content
        #[allow(deprecated)]
        let decoded = base64::decode(b64_content)?;

        let format = match format {
            ElodateImageFormat::PNG => image::ImageFormat::Png,
            ElodateImageFormat::JPEG => image::ImageFormat::Jpeg,
            ElodateImageFormat::WEBP => image::ImageFormat::WebP,
        };
        // Open path as DynamicImage
        let image: DynamicImage =
            Reader::with_format(std::io::Cursor::new(decoded), format).decode()?;
        // Make webp::Encoder from DynamicImage
        let encoder: Encoder = Encoder::from_image(&image)?;

        // Encode image into WebPMemory
        let encoded_webp: WebPMemory = encoder.encode(65f32);

        // Write WebPMemory to file
        let mut file = File::create(file_path)?;
        file.write_all(encoded_webp.as_bytes())?;
        Ok(())
    }
}

const TEST_IMG_B64: &str = "iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAA7npUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjajVFZbsUwCPz3KXoENm/HcZYn9Qbv+G9s46SpVKlIxsNAYEzC+f5+ha9uUiRYzCXVlAhm1ao0gELTtuGZbPhh5inEDz5cCQGluHWGVZw/wQOzx9WH8KpfjRbgBhTvRGvOb09+84ZSfjdyBcpzMh3+gTdScUUufXdFqZb8eNqx09PKfUyzpJg4G7wJ5ZwqcBGyjH0eXehrlzoaxbnQi1jxKhVoklNZCV41TZXaj2nDHeFZOfRCgE4pPPBYPOFXQgKUVx/U6Frmz93cO/rD/vOs8AEd7nao0NSwOAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU4tFWkTsIOKQoTrZRaU41ioUoUKoFVp1MLn0C5q0JCkujoJrwcGPxaqDi7OuDq6CIPgB4uzgpOgiJf4vKbSI8eC4H+/uPe7eAUKryjSzLwFoumVkUkkxl18V+18RQBBDCCMuM7M+J0lpeI6ve/j4ehfjWd7n/hxhtWAywCcSJ1jdsIg3iOObVp3zPnGElWWV+Jx40qALEj9yXXH5jXPJYYFnRoxsZp44QiyWeljpYVY2NOIZ4qiq6ZQv5FxWOW9x1qoN1rknf2GooK8sc53mGFJYxBIkiFDQQAVVWIjRqpNiIkP7SQ//qOOXyKWQqwJGjgXUoEF2/OB/8Ltbszg95SaFkkDgxbY/xoH+XaDdtO3vY9tunwD+Z+BK7/prLWD2k/RmV4seAYPbwMV1V1P2gMsdYOSpLhuyI/lpCsUi8H5G35QHhm+BgTW3t84+Th+ALHWVvgEODoGJEmWve7w72Nvbv2c6/f0Aj75ysi/yHrgAAA16aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmY5MTk2YzNhLTVhMTYtNDEwOC1iZjFmLWQ0ZDY4NmNhYWI2NSIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozOTBkYWI4Zi00MzJlLTRlNDAtYjViNS1jZjQ2YzNkMzdjZDUiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphNWQ5OTllNi0xZmM5LTQ0MTktYjYyZi0xMWFlMTI1ZjJhMTUiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09Ik1hYyBPUyIKICAgR0lNUDpUaW1lU3RhbXA9IjE3MTU0NzU4MDI5NTM2NDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zNiIKICAgZGM6Rm9ybWF0PSJpbWFnZS9wbmciCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHhtcDpDcmVhdG9yVG9vbD0iR0lNUCAyLjEwIgogICB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0OjA1OjExVDIxOjAzOjIxLTA0OjAwIgogICB4bXA6TW9kaWZ5RGF0ZT0iMjAyNDowNToxMVQyMTowMzoyMS0wNDowMCI+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2ZWI1OWI5LTI3NmMtNDNhOS1iMDZhLWUxMmU2M2NhMzM5ZiIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChNYWMgT1MpIgogICAgICBzdEV2dDp3aGVuPSIyMDI0LTA1LTExVDIxOjAzOjIyLTA0OjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pqo+eF4AAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfoBQwBAxZqzo8iAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAFgVJREFUeNrdmnl8VdW5979r7zNwQuaBTIQkkKBAwiTDyyAoiAiodeBqVfRz29daR24dWmsdOniv1KK3vtdauVKxtFe0Igpa4FUoFqzIIBjIAJoESRgTApyE5OQMe63n/nFODiDoZVLb++SzP2fn7HXWXs9vPfOzlIgIZ02CIGgsFGALgAEUAggGowyIjYLYpTACSikUgkKDEkSs6AhF9FMUYFCx+cCKPZPYm6PvPFNS5wYAwBiwYuwJmBgPSgSMIE6IwJFDtPtbCXS0gxiSUlNIy+mJciWAbWMQLATLCIgBMTiOAwosl42yPSAKpVTXawBBnQUErnPBu0hsJ8QAGlEK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";
